!function(){var e={CONTENT_ENCODING_MULTIPLE:1.5,DEFAULT_CONTENT_LENGTH:1048576,DECOMPRESSED_CONTENT_LENGTH_HEADER:"x-decompressed-content-length"};if(window.Proxy){var t=XMLHttpRequest,n=function(e,t){var n=0;e["decompressed-content-length"]&&(n=e["decompressed-content-length"]);try{if(!n){var s=t.target.getResponseHeader(e.DECOMPRESSED_CONTENT_LENGTH_HEADER);null!=s&&(n=parseInt(s))}if(!n){var r=t.target.getResponseHeader("content-length");if(r){r=parseInt(r);var l=t.target.getResponseHeader("content-encoding");n=l&&"identity"!=l?r*e.CONTENT_ENCODING_MULTIPLE|0:r*e.CONTENT_ENCODING_MULTIPLE}}}catch(e){}return n||(n=e.DEFAULT_CONTENT_LENGTH),n},s=function(e,t){var s=0;return function(r){if(r&&(r instanceof ProgressEvent||e.no_type_check)&&("progress"==r.type||"load"==r.type||"loadend"==r.type))if(0==r.lengthComputable){var l=r;r=new Proxy(r,{get:function(t,r){return"lengthComputable"==r||("loaded"==r?(s||(s=n(e,l)),e.loadFinished?s:Math.min(l.loaded,s-1)):"total"==r?(s||(s=n(e,l)),s):t[r])}})}else e.lengthComputable=!0;e.latestProgress=r,t&&t(r)}},r={set:function(e,t,n){return e.xmlHTTPRequestLengthComputable&&0==t.indexOf("on")&&e.xmlHTTPRequestLengthComputable.listeners[t.substr(2)]?(e.xmlHTTPRequestLengthComputable.listeners[t.substr(2)].on&&delete e.xmlHTTPRequestLengthComputable.listeners[t.substr(2)].on,n?(e[t]=s(e.xmlHTTPRequestLengthComputable,n),e.xmlHTTPRequestLengthComputable.listeners[t.substr(2)].on=n):e[t]=n):e[t]=n,!0},get:function(e,t){return"addEventListener"==t?function(){if(e.xmlHTTPRequestLengthComputable.listeners[arguments[0]]){var n=s(e.xmlHTTPRequestLengthComputable,arguments[1]);return e.xmlHTTPRequestLengthComputable.listeners[arguments[0]].listeners.push([n,arguments[1]]),e[t].call(e,arguments[0],n,arguments[2],arguments[3])}return e[t].apply(e,arguments)}:"removeEventListener"==t?function(){if(!e.xmlHTTPRequestLengthComputable.listeners[arguments[0]])return e[t].apply(e,arguments);for(var n=e.xmlHTTPRequestLengthComputable.listeners[arguments[0]].listeners,s=0;s<n.length;++s)if(n[s][1]==arguments[1])return n=n.splice(s)[0],e[t].call(e,arguments[0],n[0],arguments[2],arguments[3])}:"function"==typeof e[t]?function(){return e[t].apply(e,arguments)}:e[t]}};for(var l in window.XMLHttpRequest=function(n){var s=new t(n),l=new Proxy(s,r),o=window.xmlHTTPRequestLengthComputable||e;n&&n.xmlHTTPRequestLengthComputable&&(o=n.xmlHTTPRequestLengthComputable);var u={};for(var a in e)u[a]=o[a]||e[a];return o["decompressed-content-length"]&&(u["decompressed-content-length"]=o["decompressed-content-length"]),u.listeners={progress:{listeners:[]},load:{listeners:[]},loadend:{listeners:[]}},s.addEventListener("load",function(e){if(!u.lengthComputable&&(u.loadFinished=!0,u.latestProgress)){u.listeners.progress.on&&u.listeners.progress.on(u.latestProgress),e=u.listeners.progress.listeners;for(var t=0;t<e.length;++t)e[t][1]&&e[t][1](u.latestProgress)}}),u.xmlhttprequest=s,l.xmlHTTPRequestLengthComputable=u,l},t)window.XMLHttpRequest[l]=t[l]}}();
